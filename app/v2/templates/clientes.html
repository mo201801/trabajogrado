<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registro de Clientes</title>

<link rel="icon" type="image/x-icon" href="/static/favicon.icon">


<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

</head>
<body>

{% if session['rol']=='1' %}
{% include 'admin.html' %}
{% else %}
{% include 'normal.html' %}
{% endif %}

<div class="container mt-4">
    <h2 class="mb-4">Registro de Clientes</h2>

    <form id="regisclien" method="POST">
        <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input type="text" class="form-control" id="nombre" name="nombre" required>
        </div>
        
        <div class="form-group">
            <label for="apellidos">Apellido:</label>
            <input type="text" class="form-control" id="apellidos" name="apellidos" required>
        </div>
        
        <div class="form-group">
            <label for="telefono">Teléfono:</label>
            <input type="tel" class="form-control" id="telefono" name="telefono" required>
        </div>
        
        <div class="form-group">
            <label for="direccion">Dirección:</label>
            <input type="text" class="form-control" id="direccion" name="direccion" required>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
                <input type="date" class="form-control" id="fecha_nacimiento" name="fecha_nacimiento" required>
            </div>
            <div class="form-group col-md-6">
                <label for="genero">Género:</label>
                <select class="form-control" id="genero" name="genero" required>
                    <option value="masculino">Masculino</option>
                    <option value="femenino">Femenino</option>
                    <option value="otro">Ninguno</option>
                </select>
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="fecha_ingreso">Fecha de Ingreso:</label>
                <input type="date" class="form-control" id="fecha_ingreso" name="fecha_ingreso" required disabled>
            </div>
            <div class="form-group col-md-6">
                <label for="motivo">Motivo del Caso:</label>
                <textarea class="form-control" id="motivo" name="motivo" rows="4" required></textarea>
            </div>
        </div>POST
        
        <div class="form-group">
            <label for="dui">Número de DUI:</label>
            <input type="text" class="form-control" id="dui" name="dui" required>
        </div>
        
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="telefono_referencia">Teléfono de Referencia:</label>
                <input type="tel" class="form-control" id="telefono_referencia" name="telefono_referencia" required>
            </div>
            <div class="form-group col-md-6">
                <label for="nombre_referencia">Nombre de Referencia:</label>
                <input type="text" class="form-control" id="nombre_referencia" name="nombre_referencia" required>
            </div>
        </div>
        
        <button type="submit" class="btn btn-primary">Enviar</button>
    </form>
</div>

<footer class="text-center mt-0">
        <p>Bufete Cartagena 2024</p>
    </footer>

<!-- Bootstrap JS and dependencies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script type="text/javascript">
$(function(){

     var today = new Date().toISOString().split('T')[0];
    $('#fecha_ingreso').val(today);

    $('#regisclien').on('submit',function(event){
        event.preventDefault();
        
        $.ajax({
            type:'POST',
            url:'/clientes',  // URL del script PHP para guardar datos
            data:{
                nombre: $('#nombre').val(),
                apellido: $('#apellidos').val(),
                tel: $('#telefono').val(),
                direc: $('#direccion').val(),
                fena: $('#fecha_nacimiento').val(),
                gen: $('#genero').val(),
                feingre: $('#fecha_ingreso').val(),
                motica: $('#motivo').val(),
                dui: $('#dui').val(),
                telre: $('#telefono_referencia').val(),
                nomrefe: $('#nombre_referencia').val()
            },
            success:function(response){
                console.log(response);
                $('#regisclien')[0].reset();
                alert('Datos guardados correctamente.');
            },
            error:function(response){
                alert('Error al guardar los datos.');
            }
        });
    });
});
</script>

</body>
</html>
