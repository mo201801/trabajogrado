<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulario de Subida de Documento con Bootstrap</title>
<!--agregado de favicon-->
   <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
<!-- Bootstrap CSS -->
<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

<!-- jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

</head>
<body>


{% if session['rol']=='1' %}
{% include 'admin.html' %}
{% else %}
{% include 'normal.html' %}
{% endif %}


<!-- <h1>
<p>Ha iniciado Sesion: {{session['username']}}</p>
</h1> -->



<div class="container mt-4">
  <h2 class="mb-4">Formulario para Subir Documento</h2>
  <form method="POST" enctype="multipart/form-data" id="subirdoc">
    


    <div class="form-group">
      <label for="cliente">Nombre Cliente:</label>
      <select class="form-control" id="mostrar" name="mostrar">
            {% for l,c in mostrar.items() %}
                <option value="{{ l }}">{{ l }} {{ c }}</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="form-group">
      <label for="tipo_documento">Tipo de Documento:</label>
      <select class="form-control" id="tipo_documento" name="tipo_documento">
            {% for a in docu %}
                <option value="{{ a['tipo_docu'] }}">{{ a["tipo_docu"] }}</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="form-group">
      <label for="abogado">Abogado Responsable:</label>
      <select class="form-control" id="tipo_documento" name="tipo_documento">
            {% for b in abogado %}
                <option value="{{ b['Abogado'] }}">{{ b["Abogado"] }}</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="form-group">
      <label for="comentario">Comentario:</label>
      <textarea class="form-control" id="comentario" name="comentario" rows="4"></textarea>
    </div>
    
    <div class="form-group">
      <label for="archivo">Adjuntar Archivo:</label>
      <input type="file" class="form-control-file" id="archivo" name="archivo" accept=".pdf, .doc, .docx">
    </div>
    
    <button type="submit" class="btn btn-primary">Subir Documento</button>
  </form>
</div>

<footer class="text-center mt-5">
  <p>Bufete Cartagena 2024Â®</p>
</footer>

<script>
$(function(){
  $('#subirdoc').on('submit',function(event){
    event.preventDefault();
// funcion para hacer envio de datos de formulario y archivo.
  var formData = new FormData(this);
    
$.ajax({
      type:'POST',
      url:'/cargar', 
      data:formData
      ,processData: false,
      contentType: false,
      success:function(response){
        //console.log(response);
        $('#subirdoc')[0].reset();
        alert('Datos guardados correctamente.');

      },
      error:function(response){
        alert('Error al guardar los datos.');
      }
    });
  });
}); 
                    
   
</script>

<!-- Bootstrap JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>
